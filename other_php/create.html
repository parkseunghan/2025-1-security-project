<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>게시글 생성</title>
    </head>

    <body>
        <h1><a href="index.html">게시판 홈</a></h1>
        <h1>글쓰기</h1>
        <div>작성자 : <span id="username"></span> 님</div>
    
        <form action="create.php" method="post" enctype="multipart/form-data">
            <button type="submit">글쓰기</button><br>
            <br><label>제목</label><br>
            <input type="text" id="title" name="title" required>
            <br><label>본문</label><br>
            <textarea id="content" name="content" rows="10" required></textarea>
            <br><label for="file">파일 첨부</label><br>
            <input type="file" id="file" name="file">
        </form>

        <script>
            document.addEventListener("DOMContentLoaded", function(){
                fetch('check_login.php')
                    .then(response => response.json())
                    .then(data =>{
                        if(data.loggedIn){
                            document.getElementById('username').textContent = data.username;
                        }else{
                            alert('로그인 필요');
                            window.location.href = 'login.html';
                        }
                    });
            });
        </script>
    </body>
</html>